(function(t){function e(e){for(var r,n,l=e[0],o=e[1],c=e[2],m=0,d=[];m<l.length;m++)n=l[m],i[n]&&d.push(i[n][0]),i[n]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,l=1;l<a.length;l++){var o=a[l];0!==i[o]&&(r=!1)}r&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var r={},i={app:0},s=[];function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=o;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0b3f":function(t,e,a){"use strict";var r=a("3e3b"),i=a.n(r);i.a},"18ef":function(t,e,a){var r={"./af":"4cef","./af.js":"4cef","./ar":"7c9f","./ar-dz":"46ef","./ar-dz.js":"46ef","./ar-kw":"9b7b","./ar-kw.js":"9b7b","./ar-ly":"2d53","./ar-ly.js":"2d53","./ar-ma":"5521","./ar-ma.js":"5521","./ar-sa":"25dd","./ar-sa.js":"25dd","./ar-tn":"ccca","./ar-tn.js":"ccca","./ar.js":"7c9f","./az":"d38c","./az.js":"d38c","./be":"bb2b","./be.js":"bb2b","./bg":"fedf","./bg.js":"fedf","./bm":"80aa","./bm.js":"80aa","./bn":"d916","./bn.js":"d916","./bo":"4d28","./bo.js":"4d28","./br":"9562","./br.js":"9562","./bs":"41d6","./bs.js":"41d6","./ca":"499d","./ca.js":"499d","./cs":"3e8f","./cs.js":"3e8f","./cv":"e10f","./cv.js":"e10f","./cy":"f559","./cy.js":"f559","./da":"c36b","./da.js":"c36b","./de":"4cc8","./de-at":"6464","./de-at.js":"6464","./de-ch":"7404","./de-ch.js":"7404","./de.js":"4cc8","./dv":"131c","./dv.js":"131c","./el":"84a7","./el.js":"84a7","./en-au":"0857","./en-au.js":"0857","./en-ca":"e7c3","./en-ca.js":"e7c3","./en-gb":"4a79","./en-gb.js":"4a79","./en-ie":"0205","./en-ie.js":"0205","./en-il":"7aec","./en-il.js":"7aec","./en-nz":"f3f5","./en-nz.js":"f3f5","./eo":"c2ed","./eo.js":"c2ed","./es":"c97f","./es-do":"6832","./es-do.js":"6832","./es-us":"a08e","./es-us.js":"a08e","./es.js":"c97f","./et":"2acc","./et.js":"2acc","./eu":"bfe1","./eu.js":"bfe1","./fa":"3b9c","./fa.js":"3b9c","./fi":"1e42","./fi.js":"1e42","./fo":"62a4","./fo.js":"62a4","./fr":"d719","./fr-ca":"4aa6","./fr-ca.js":"4aa6","./fr-ch":"39a1","./fr-ch.js":"39a1","./fr.js":"d719","./fy":"2ec6","./fy.js":"2ec6","./gd":"c9b3","./gd.js":"c9b3","./gl":"430f","./gl.js":"430f","./gom-latn":"3b54","./gom-latn.js":"3b54","./gu":"1769","./gu.js":"1769","./he":"c05b","./he.js":"c05b","./hi":"97f4","./hi.js":"97f4","./hr":"822a","./hr.js":"822a","./hu":"0498","./hu.js":"0498","./hy-am":"eebb","./hy-am.js":"eebb","./id":"deb1","./id.js":"deb1","./is":"9f11","./is.js":"9f11","./it":"dca7","./it.js":"dca7","./ja":"719e","./ja.js":"719e","./jv":"4bc3","./jv.js":"4bc3","./ka":"adcc","./ka.js":"adcc","./kk":"19a4","./kk.js":"19a4","./km":"4176","./km.js":"4176","./kn":"ff10","./kn.js":"ff10","./ko":"05d0","./ko.js":"05d0","./ku":"48d9","./ku.js":"48d9","./ky":"2c23","./ky.js":"2c23","./lb":"f410","./lb.js":"f410","./lo":"7117","./lo.js":"7117","./lt":"3957","./lt.js":"3957","./lv":"ac40","./lv.js":"ac40","./me":"f647","./me.js":"f647","./mi":"4e48","./mi.js":"4e48","./mk":"b4e7","./mk.js":"b4e7","./ml":"99ee","./ml.js":"99ee","./mn":"ca88","./mn.js":"ca88","./mr":"2288","./mr.js":"2288","./ms":"d9d0","./ms-my":"b858","./ms-my.js":"b858","./ms.js":"d9d0","./mt":"129a","./mt.js":"129a","./my":"5751","./my.js":"5751","./nb":"d6aa","./nb.js":"d6aa","./ne":"8656","./ne.js":"8656","./nl":"0ccc","./nl-be":"50d8","./nl-be.js":"50d8","./nl.js":"0ccc","./nn":"eea8","./nn.js":"eea8","./pa-in":"bdfb","./pa-in.js":"bdfb","./pl":"83d1","./pl.js":"83d1","./pt":"0322","./pt-br":"ec94","./pt-br.js":"ec94","./pt.js":"0322","./ro":"def5","./ro.js":"def5","./ru":"5d14","./ru.js":"5d14","./sd":"14c2","./sd.js":"14c2","./se":"cf95","./se.js":"cf95","./si":"a1bc","./si.js":"a1bc","./sk":"839f","./sk.js":"839f","./sl":"22cd","./sl.js":"22cd","./sq":"df9b","./sq.js":"df9b","./sr":"046a","./sr-cyrl":"f072","./sr-cyrl.js":"f072","./sr.js":"046a","./ss":"f751","./ss.js":"f751","./sv":"e9fc","./sv.js":"e9fc","./sw":"7935","./sw.js":"7935","./ta":"f03f","./ta.js":"f03f","./te":"2a84","./te.js":"2a84","./tet":"2589","./tet.js":"2589","./tg":"6988","./tg.js":"6988","./th":"4a6e","./th.js":"4a6e","./tl-ph":"4250","./tl-ph.js":"4250","./tlh":"ad71","./tlh.js":"ad71","./tr":"824a","./tr.js":"824a","./tzl":"8652","./tzl.js":"8652","./tzm":"7013","./tzm-latn":"8cc2","./tzm-latn.js":"8cc2","./tzm.js":"7013","./ug-cn":"4350","./ug-cn.js":"4350","./uk":"b800","./uk.js":"b800","./ur":"cbac","./ur.js":"cbac","./uz":"ac82","./uz-latn":"6e55","./uz-latn.js":"6e55","./uz.js":"ac82","./vi":"1874","./vi.js":"1874","./x-pseudo":"02cc","./x-pseudo.js":"02cc","./yo":"307c","./yo.js":"307c","./zh-cn":"f427","./zh-cn.js":"f427","./zh-hk":"0a18","./zh-hk.js":"0a18","./zh-tw":"1578","./zh-tw.js":"1578"};function i(t){var e=s(t);return a(e)}function s(t){var e=r[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}i.keys=function(){return Object.keys(r)},i.resolve=s,t.exports=i,i.id="18ef"},"259c":function(t,e,a){},"3d8e":function(t,e,a){"use strict";var r=a("576d"),i=a.n(r);i.a},"3e3b":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("795b"),i=a.n(r),s=(a("cadf"),a("551c"),a("097d"),a("2b0e")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Layout")],1)},l=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warpper"},[t.isLogin?t._e():a("Header"),a("main",{staticClass:"main",class:[t.isLogin?t.loginMain:""]},[a("router-view")],1),t.isLogin?t._e():a("Footer")],1)},c=[],u=a("cebc"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"})},d=[],p={name:"Footer",props:{msg:String}},f=p,h=(a("78d6"),a("2877")),g=Object(h["a"])(f,m,d,!1,null,"0f52c3a2",null);g.options.__file="Footer.vue";var b=g.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",[a("div",{staticClass:"header"},[a("el-row",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{select:t.rotuteTo}},[a("el-menu-item",{attrs:{index:"1"}},[t._v("首页")]),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[t._v("原材料管理")]),a("el-menu-item",{attrs:{index:"2-1"}},[t._v("原材料管理")]),a("el-menu-item",{attrs:{index:"2-2"}},[t._v("入库单管理")]),a("el-menu-item",{attrs:{index:"2-3"}},[t._v("出库单管理")])],2),a("el-menu-item",{attrs:{index:"3",disabled:""}},[t._v("成品管理")]),a("el-menu-item",{attrs:{index:"4",disabled:""}},[t._v("废料管理")]),a("el-menu-item",{attrs:{index:"5",disabled:""}},[t._v("订单管理")]),a("el-menu-item",{attrs:{index:"6",disabled:""}},[t._v("分类管理")]),a("el-menu-item",{attrs:{index:"7",disabled:""}},[t._v("合作伙伴管理")]),a("el-menu-item",{attrs:{index:"8",disabled:""}},[t._v("人员管理")])],1)],1),a("div",{staticClass:"logout"},[a("span",{staticClass:"logout-username"},[t._v(t._s(t.user.nick_name||t.user.tel||"匿名用户"))]),a("span",{staticClass:"logout-welcome"},[t._v("欢迎登录，您的用户类型是")]),a("span",{staticClass:"logout-roleName"},[t._v(t._s(t.user.roleName||"未知"))]),a("el-button",{attrs:{type:"text"},on:{click:t.logout}},[t._v("退出登录")])],1)],1)])},_=[],y=a("2f62"),k={name:"Header",props:{msg:String},data:function(){return{activeIndex:"1"}},computed:Object(u["a"])({},Object(y["b"])({user:"user/user"})),methods:{rotuteTo:function(t,e){switch(t){case"1":this.$router.push("/");break;case"2-1":this.$router.push("/material");break;case"2-2":this.$router.push("/material/entry");break;case"2-3":this.$router.push("/material/out");break;case 3:this.$router.push("/product");break;case 4:this.$router.push("/wasted");break;case 5:this.$router.push("/order");break;case 6:this.$router.push("/category");break;case 7:this.$router.push("/cooperator");break;case 8:this.$router.push("/user");break;default:this.$router.push("/");break}},logout:function(){var t=this;this.$axios.post("/auth/logout",this.loginForm).then(function(e){200===e.status?(window.localStorage.removeItem("user"),t.$store.dispatch("user/updateUser",{}),t.$router.push("/login")):t.$message.error("退出登录失败")}).catch(function(){t.$message.error("接口请求失败")})}}},w=k,C=(a("688a"),Object(h["a"])(w,v,_,!1,null,"45db3cf8",null));C.options.__file="Header.vue";var j=C.exports,x={name:"Layout",components:{Footer:b,Header:j},data:function(){return{isLogin:!1,loginMain:"login-main"}},computed:Object(u["a"])({},Object(y["b"])({navigator:"navigator/navigator"})),watch:{navigator:function(t){this.isLogin="/login"===t}},created:function(){this.isLogin="/login"===this.$route.path;var t=window.localStorage.getItem("user");t&&this.$store.dispatch("user/updateUser",JSON.parse(t))}},E=x,F=(a("d0a8"),Object(h["a"])(E,o,c,!1,null,"44ea52f4",null));F.options.__file="Layout.vue";var $=F.exports;window.jQuery=a("a60a"),a("479d");var O={name:"App",components:{Layout:$}},D=O,T=(a("5c0b"),Object(h["a"])(D,n,l,!1,null,null,null));T.options.__file="App.vue";var M=T.exports,S=(a("6762"),a("2fdb"),a("a4bb")),A=a.n(S),z=a("8c4f"),q={user:{}},P={user:function(t){return t.user}},I={updateUser:function(t,e){var a=t.commit;a("UPDATE_USER",e)}},L={UPDATE_USER:function(t,e){t.user=e}},N={namespaced:!0,state:q,getters:P,actions:I,mutations:L},U={navigator:""},R={navigator:function(t){return t.navigator}},V={updateNavigator:function(t,e){var a=t.commit;a("UPDATE_NAVIGATOR",e)}},Y={UPDATE_NAVIGATOR:function(t,e){t.navigator=e}},H={namespaced:!0,state:U,getters:R,actions:V,mutations:Y};s["default"].use(y["a"]);var J=new y["a"].Store({modules:{user:N,navigator:H}}),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material"},[a("div",{staticClass:"material-breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("原材料管理")])],1)],1),a("div",{staticClass:"material-searching"},[a("el-form",{staticClass:"searching-form",attrs:{inline:!0,model:t.searchingForm}},[a("el-form-item",[a("el-select",{staticClass:"materil-entry-status",attrs:{placeholder:"材料分类"},model:{value:t.searchingForm.categoryId,callback:function(e){t.$set(t.searchingForm,"categoryId",e)},expression:"searchingForm.categoryId"}},[a("el-option",{attrs:{label:"所有",value:""}}),t._l(t.categories,function(t){return a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})})],2)],1),a("el-form-item",[a("el-input",{staticClass:"keyword",attrs:{placeholder:"材料名/代号关键字"},model:{value:t.searchingForm.keyword,callback:function(e){t.$set(t.searchingForm,"keyword",e)},expression:"searchingForm.keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searching}},[t._v("搜索")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMaterial}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"materials"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:t.materials}},[a("el-table-column",{attrs:{label:"序号",prop:"index",width:"60px"}}),a("el-table-column",{attrs:{label:"材料编号",prop:"no"}}),a("el-table-column",{attrs:{label:"材料名称",prop:"name"}}),a("el-table-column",{attrs:{label:"所属分类",prop:"category.name"}}),a("el-table-column",{attrs:{label:"供应商",prop:"supplier.name"}}),a("el-table-column",{attrs:{label:"材料型号",prop:"model"}}),a("el-table-column",{attrs:{label:"完整品数量",prop:"left_num"}}),a("el-table-column",{attrs:{label:"废品数量",prop:"wasted_num"}}),a("el-table-column",{attrs:{label:"单位",prop:"unit"}}),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editMaterial(e.$index,e.row)}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteMaterial(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t.materials.length?a("div",{staticClass:"material-paging"},[a("el-pagination",{staticClass:"paging-item",attrs:{"current-page":t.page.currentPage,"page-size":t.page.pageSize,background:"",big:"",layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"current-change":t.jumpingTo,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1):t._e(),a("el-dialog",{attrs:{title:t.materialDialogTitle,visible:t.showDialog,width:"30%","before-close":t.resetMaterialForm},on:{"update:visible":function(e){t.showDialog=e}}},[a("el-form",{ref:"materialForm",staticClass:"material-dialog",attrs:{model:t.materialForm,rules:t.materialRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:t.materialForm.name,callback:function(e){t.$set(t.materialForm,"name",e)},expression:"materialForm.name"}})],1),a("el-form-item",{attrs:{label:"代号",prop:"no"}},[a("el-input",{model:{value:t.materialForm.no,callback:function(e){t.$set(t.materialForm,"no",e)},expression:"materialForm.no"}})],1),a("el-form-item",{attrs:{label:"型号",prop:"model"}},[a("el-input",{model:{value:t.materialForm.model,callback:function(e){t.$set(t.materialForm,"model",e)},expression:"materialForm.model"}})],1),a("el-form-item",{attrs:{label:"规格",prop:"specific"}},[a("el-input",{model:{value:t.materialForm.specific,callback:function(e){t.$set(t.materialForm,"specific",e)},expression:"materialForm.specific"}})],1),a("el-form-item",{attrs:{label:"单位",prop:"unit"}},[a("el-input",{model:{value:t.materialForm.unit,callback:function(e){t.$set(t.materialForm,"unit",e)},expression:"materialForm.unit"}})],1),a("el-form-item",{attrs:{label:"分类",prop:"category"}},[a("el-select",{attrs:{placeholder:"请选择材料分类"},model:{value:t.materialForm.category,callback:function(e){t.$set(t.materialForm,"category",e)},expression:"materialForm.category"}},t._l(t.categories,function(t){return a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:"供应商",prop:"supplier"}},[a("el-select",{attrs:{placeholder:"请选择供应商"},model:{value:t.materialForm.supplier,callback:function(e){t.$set(t.materialForm,"supplier",e)},expression:"materialForm.supplier"}},t._l(t.suppliers,function(t){return a("el-option",{key:t._id,attrs:{label:t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{model:{value:t.materialForm.remark,callback:function(e){t.$set(t.materialForm,"remark",e)},expression:"materialForm.remark"}})],1),a("el-form-item",[a("el-button",{on:{click:t.cancleSubmit}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitMaterialForm("materialForm")}}},[t._v("保存")])],1)],1)],1)],1)},B=[],G=(a("28a5"),a("5176")),Q=a.n(G),Z={name:"Material",data:function(){return{searchingForm:{keyword:"",categoryId:""},materialDialogTitle:"",materialForm:{no:"",name:"",specific:"",model:"",supplier:"",category:"",marked_price:0,remark:"",unit:""},materialRules:{no:[{required:!0,message:"材料代号为必填",trigger:"blur"}],name:[{required:!0,message:"材料名称为必填",trigger:"blur"}],specific:[{required:!0,message:"材料规格为必填",trigger:"blur"}],model:[{required:!0,message:"材料型号为必填",trigger:"blur"}],supplier:[{required:!0,message:"供应商为必填",trigger:"blur"}],category:[{required:!0,message:"材料分类为必填",trigger:"blur"}],unit:[{required:!0,message:"材料单位为必填",trigger:"blur"}]},materials:[],categories:[],suppliers:[],page:{currentPage:1,pageSize:10,total:1},currentMaterial:{},showDialog:!1,tableLoading:!0}},methods:{searching:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&(this.page.currentPage=1),this.getMaterials(this.searchingForm)},jumpingTo:function(t){this.page.currentPage=t,this.searching(!1)},getMaterials:function(t){var e=this,a=this.page,r=a.pageSize,i=a.currentPage,s=this.$moment,n={limit:r,offset:r*(i-1),embed:"material"};this.$axios.get("/materials",{params:Q()(n,this.$route.params,t)}).then(function(t){var a=t.data,r=a.data,i=a.meta,n=e.page,l=n.currentPage,o=n.pageSize;e.materials=r.map(function(t,e){return t.index=(l-1)*o+e+1,t.no=t.no.split("-")[0],t.created_at=s.tz(t.created_at,"Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss"),t}),e.page.total=i.count,e.tableLoading=!1}).catch(function(){e.$message.error("原材料接口调用失败")})},getCategories:function(){var t=this;this.$axios.get("/categories",{params:{type:"MATERIAL",limit:1e4}}).then(function(e){t.categories=e.data.data}).catch(function(){t.$message.error("原材料类型接口调用失败")})},getSuppliers:function(){var t=this;this.$axios.get("/cooperators",{params:{limit:1e4,type:"SUPPLIER"}}).then(function(e){t.suppliers=e.data.data}).catch(function(){t.$message.error("供应商接口调用失败")})},printer:function(t){window.jQuery(t).printThis()},editMaterial:function(t,e){this.materialDialogTitle="修改原材料",this.showDialog=!0,this.materialForm=e},deleteMaterial:function(t,e){var a=this;this.$confirm("此操作将永久删除该原材料, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/materials/".concat(e._id)).then(function(t){a.$message.success({message:"删除材料成功",duration:1500,onClose:function(){a.showDialog=!1,a.searching(!0)}})}).catch(function(){a.$message.error("删除材料接口调用失败")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addMaterial:function(){this.materialDialogTitle="新增原材料",this.showDialog=!0},saveMaterial:function(){},resetMaterialForm:function(){this.showDialog=!1},submitMaterialForm:function(t){var e=this,a="/materials",r="post",i=this[t],s=!!i._id;s&&(a="/materials/".concat(i._id),r="patch",i.category=i.category._id,i.supplier=i.supplier._id,delete i.enable,delete i.index,delete i.created_at,delete i.updated_at,delete i.wasted_num,delete i.total_num,delete i.__v,delete i._id,delete i.left_num,delete i.marked_price),this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.request({url:a,method:r,data:i}).then(function(t){e.$message.success({message:s?"修改材料成功":"新增材料成功",duration:1500,onClose:function(){e.showDialog=!1,e.searching(!0)}})}).catch(function(t){t.request&&400===t.request.status?e.$message.error("参数错误"):e.$message.error("接口请求失败")})})},cancleSubmit:function(){this.showDialog=!1}},mounted:function(){this.getCategories(),this.getMaterials(),this.getSuppliers()}},K=Z,X=(a("cb11"),Object(h["a"])(K,W,B,!1,null,null,null));X.options.__file="Material.vue";var tt=X.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material-entry"},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/material"}}},[t._v("原材料管理")]),a("el-breadcrumb-item",[t._v("入库单管理")])],1)],1),a("div",{staticClass:"searching"},[a("el-form",{staticClass:"searching-form",attrs:{inline:!0,model:t.searchingForm}},[a("el-form-item",[a("el-select",{staticClass:"materil-entry-status",attrs:{placeholder:"入库单状态"},model:{value:t.searchingForm.status,callback:function(e){t.$set(t.searchingForm,"status",e)},expression:"searchingForm.status"}},[a("el-option",{attrs:{label:"所有",value:""}}),a("el-option",{attrs:{label:"未审核",value:"UNREVIEW"}}),a("el-option",{attrs:{label:"通过",value:"PASSED"}}),a("el-option",{attrs:{label:"未通过",value:"REJECTED"}})],1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.dateTimeOptions},model:{value:t.searchingForm.dateTime,callback:function(e){t.$set(t.searchingForm,"dateTime",e)},expression:"searchingForm.dateTime"}})],1),a("el-form-item",[a("el-input",{staticClass:"keyword",attrs:{placeholder:"入库单关键字"},model:{value:t.searchingForm.keyword,callback:function(e){t.$set(t.searchingForm,"keyword",e)},expression:"searchingForm.keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searching}},[t._v("搜索")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMaterialEntry}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"material-entries"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.materialEntries},on:{"row-click":t.showDetail}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-form",{staticClass:"table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"厂家："}},[a("span",[t._v(t._s(e.row.material.name))])]),a("el-form-item",{attrs:{label:"材料编码："}},[a("span",[t._v(t._s(e.row.material.no))])]),a("el-form-item",{attrs:{label:"采购员："}},[a("span",[t._v(t._s(e.row.buyer.name))])]),a("el-form-item",{attrs:{label:"质检员："}},[a("span",[t._v(t._s(e.row.inspector?e.row.inspector.name:"待质检"))])]),a("el-form-item",{attrs:{label:"质检结果："}},[e.row.quality_result?a("span",[t._v(t._s(e.row.quality_result?"通过":"不通过"))]):a("span",[t._v("'待质检'")])]),a("el-form-item",{attrs:{label:"付款方式："}},[a("span",[t._v(t._s(e.row.purchase_method))])])],1)]}}])}),a("el-table-column",{attrs:{label:"序号",prop:"index",width:"60px"}}),a("el-table-column",{attrs:{label:"入库单编号",prop:"no",width:"100px"}}),a("el-table-column",{attrs:{label:"材料名称",prop:"material.name",width:"100px"}}),a("el-table-column",{attrs:{label:"型号",prop:"material.model",width:"120px"}}),a("el-table-column",{attrs:{label:"数量",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.real_count||e.row.application_count))]}}])}),"CAIGOU"===t.user.role?a("el-table-column",{attrs:{label:"单价",prop:"per_price",width:"80px"}}):t._e(),a("el-table-column",{attrs:{label:"单位",prop:"material.unit",width:"80px"}}),a("el-table-column",{attrs:{label:"总金额",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.total_price)+"元")]}}])}),a("el-table-column",{attrs:{label:"入库日期",prop:"created_at"}}),a("el-table-column",{attrs:{label:"审核状态",prop:"cnstatus",width:"80px"}}),a("el-table-column",{attrs:{label:"详情",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.showDetail(e.row)}}},[t._v("查看详情")])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.hasModifyRight?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editEntry(e.$index,e.row)}}},[t._v("修改")]):t._e(),"ADMIN"===t.user.role?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteEntry(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t.materialEntries.length?a("div",{staticClass:"paging"},[a("el-pagination",{staticClass:"paging-item",attrs:{"current-page":t.page.currentPage,"page-size":t.page.pageSize,background:"",big:"",layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1):t._e(),a("div",{staticClass:"material-entry-detail"},[t.entryDetail?a("el-dialog",{attrs:{title:"入库单",visible:t.detailVisable},on:{"update:visible":function(e){t.detailVisable=e},close:t.closeEntry}},[a("el-row",{staticClass:"entry-printer"},["CAIGOU"===t.user.role?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.printer}},[t._v("打印")]):t._e()],1),a("div",{staticClass:"entry-detail-container"},[a("div",{staticClass:"entry-remark"},[a("h2",{staticClass:"entry-remark-title"},[t._v("入库单")]),a("span",{staticClass:"entry-remark-item"},[t._v("一式四联，1库房2财务3采购员4质检")])]),a("table",{staticClass:"entry-table",attrs:{border:"1"}},[a("tr",[a("th",{attrs:{rowspan:"2",colspan:"2"}},[t._v("材料入库单")]),a("td",{attrs:{colspan:"2"}},[a("span",{staticClass:"entry-item-title"},[t._v("入库单编号：")]),t._v("\n              "+t._s(t.entryDetail.no)+"\n            ")]),a("td",{attrs:{colspan:"2"}},[a("span",{staticClass:"entry-item-title"},[t._v("入库日期：")]),t._v("\n              "+t._s(t.entryDetail.created_at)+"\n            ")])]),a("tr",[a("td",{attrs:{colspan:"2"}},[a("span",{staticClass:"entry-item-title"},[t._v("供应商：")]),t._v("\n              "+t._s(t.entryDetail.material&&t.entryDetail.material.supplier&&t.entryDetail.material.supplier.name||"无")+"\n            ")]),a("td",{attrs:{colspan:"2"}},[a("span",{staticClass:"entry-item-title"},[t._v("送货人：")]),t._v("\n              "+t._s(t.entryDetail.sender||"无")+"\n            ")])]),a("tr",[a("th",{attrs:{rowspan:"3",colspan:"2"}},[a("p",{staticClass:"entry-item"},[t._v(t._s(t.entryDetail.material.no))]),a("p",{staticClass:"entry-item"},[t._v(t._s(t.entryDetail.material.name))]),a("p",{staticClass:"entry-item"},[t._v(t._s(t.entryDetail.remark))])]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("材料型号")])]),a("td",[t._v(t._s(t.entryDetail.material.model||"无"))]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("材料规格")])]),a("td",[t._v(t._s(t.entryDetail.material.specific||"无"))])]),a("tr",[a("td",[a("span",{staticClass:"entry-item-title"},[t._v("检验数量")])]),a("td",[t._v("\n              "+t._s(t.entryDetail.application_count)+"\n              "+t._s(t.entryDetail.unit)+"\n            ")]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("质检结果")])]),a("td",[t._v(t._s(t.entryDetail.quality_result?"合格":"不合格"))])]),a("tr",[a("td",[a("span",{staticClass:"entry-item-title"},[t._v("实际入库数")])]),a("td",[t._v("\n              "+t._s(t.entryDetail.real_count||"")+"\n              "+t._s(t.entryDetail.real_count?t.entryDetail.material.unit:"")+"\n            ")]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("材料单价")])]),a("td",[t.hasPriceRight&&!t.isPrinting?a("span",[t._v(t._s(t.entryDetail.per_price)+" / "+t._s(t.entryDetail.material.unit))]):t._e()])]),a("tr",[a("td",[a("span",{staticClass:"entry-item-title"},[t._v("制单人：")]),t._v("\n              "+t._s(t.entryDetail.maker.name)+"\n            ")]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("购买人：")]),t._v("\n              "+t._s(t.entryDetail.buyer.name)+"\n            ")]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("检验人：")]),t._v("\n              "+t._s(t.entryDetail.inspector?t.entryDetail.inspector.name:"")+"\n            ")]),a("td",[a("span",{staticClass:"entry-item-title"},[t._v("审核人：")]),t._v("\n              "+t._s(t.entryDetail.reviewer?t.ntryDetail.reviewer.name:"")+"\n            ")]),a("td",{attrs:{colspan:"2"}},[a("span",{staticClass:"entry-item-title"},[t._v("总价：")]),t.hasPriceRight&&!t.isPrinting?a("span",[t._v("\n                "+t._s(t.entryDetail.total_price)+"\n                元\n              ")]):t._e()])])])])],1):t._e()],1),a("div",{staticClass:"material-entry-add"},[a("el-dialog",{attrs:{title:t.materialEntryDialogTitle,visible:t.showAddDialog,width:"30%","before-close":t.closeMaterialEntryForm},on:{"update:visible":function(e){t.showAddDialog=e}}},[a("el-form",{ref:"materialEntryForm",staticClass:"material-dialog",attrs:{model:t.materialEntryForm,label:"采购员","label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"采购员",rules:{required:!0,message:"采购员不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"out-applicant",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入采购人关键词","remote-method":t.queryAccounts,loading:t.accountLoading},model:{value:t.materialEntryForm.buyer,callback:function(e){t.$set(t.materialEntryForm,"buyer",e)},expression:"materialEntryForm.buyer"}},t._l(t.accounts,function(t,e){return a("el-option",{key:e,attrs:{label:t.department.name+":"+t.name,value:t._id}})}),1)],1),a("el-form-item",{staticClass:"entry-material-container",attrs:{label:"入库材料",rules:{required:!0,message:"入库材料不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"entry-material entry-form-item",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入材料关键词","remote-method":t.queryMaterials,loading:t.materialLoading},model:{value:t.materialEntryForm.material,callback:function(e){t.$set(t.materialEntryForm,"material",e)},expression:"materialEntryForm.material"}},t._l(t.materials,function(t,e){return a("el-option",{key:e,attrs:{label:t.no+":"+t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:"付款方式",prop:"purchase_method",rules:{required:!0,message:"付款方式不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"entry-material entry-form-item",attrs:{filterable:"",placeholder:"请选择付款方式"},model:{value:t.materialEntryForm.purchase_method,callback:function(e){t.$set(t.materialEntryForm,"purchase_method",e)},expression:"materialEntryForm.purchase_method"}},t._l(t.purchase_methods,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1),a("el-form-item",{attrs:{label:"入库数量",prop:"application_count",rules:{required:!0,message:"入库数量不能为空",trigger:"blur"}}},[a("el-input",{staticClass:"applicant-count",attrs:{placeholder:"请填写入库数量"},model:{value:t.materialEntryForm.application_count,callback:function(e){t.$set(t.materialEntryForm,"application_count",e)},expression:"materialEntryForm.application_count"}})],1),["ZHIJIAN"].includes(t.user.role)?a("el-form-item",{attrs:{label:"实际数量",prop:"application_count",rules:{required:!0,message:"实际入库数量不能为空",trigger:"blur"}}},[a("el-input",{staticClass:"applicant-count",attrs:{placeholder:"请填写实际入库数量",disabled:["ZHIJIAN"].includes(t.user.role)},model:{value:t.materialEntryForm.application_count,callback:function(e){t.$set(t.materialEntryForm,"application_count",e)},expression:"materialEntryForm.application_count"}})],1):t._e(),a("el-form-item",{attrs:{label:"材料单价",prop:"per_price",rules:{required:!0,message:"单价不能为空",trigger:"blur"}}},[a("el-input",{staticClass:"per-price",attrs:{placeholder:"请填写单价"},model:{value:t.materialEntryForm.per_price,callback:function(e){t.$set(t.materialEntryForm,"per_price",e)},expression:"materialEntryForm.per_price"}})],1),["ZHIJIAN"].includes(t.user.role)?a("el-form-item",{attrs:{label:"质检结果",prop:"quality_result",rules:{required:!0,message:"质检结果不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"entry-material entry-form-item",attrs:{filterable:"",placeholder:"请选择质检结果"},model:{value:t.materialEntryForm.quality_result,callback:function(e){t.$set(t.materialEntryForm,"quality_result",e)},expression:"materialEntryForm.quality_result"}},t._l(t.quality_results,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.value}})}),1)],1):t._e(),a("el-form-item",{attrs:{label:"送货人",prop:"sender"}},[a("el-input",{staticClass:"per-price",attrs:{placeholder:"请填写送货人"},model:{value:t.materialEntryForm.sender,callback:function(e){t.$set(t.materialEntryForm,"sender",e)},expression:"materialEntryForm.sender"}})],1),["ZHIJIAN"].includes(t.user.role)?a("el-form-item",{attrs:{label:"总价",prop:"total_price"}},[a("el-input",{staticClass:"total-price",attrs:{disabled:""},model:{value:t.materialEntryForm.total_price,callback:function(e){t.$set(t.materialEntryForm,"total_price",e)},expression:"materialEntryForm.total_price"}})],1):t._e(),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"per-price",attrs:{placeholder:"请填写备注信息"},model:{value:t.materialEntryForm.remark,callback:function(e){t.$set(t.materialEntryForm,"remark",e)},expression:"materialEntryForm.remark"}})],1),a("el-form-item",{staticClass:"out-btn-container"},[a("el-button",{on:{click:t.cancleEntrySubmit}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitMaterialEntryForm("materialEntryForm")}}},[t._v("保存")])],1)],1)],1)],1)])},at=[],rt=a("7618"),it=(a("ac6a"),a("e8e8")),st={name:"MaterialEntry",computed:Object(u["a"])({},Object(y["b"])({user:"user/user"}),{hasPriceRight:function(){return["CAIGOU","CAIWU","ADMIN"].includes(this.user.role)}}),data:function(){return{searchingForm:{dateTime:"",keyword:"",status:""},materialEntries:[],page:{currentPage:1,pageSize:10,total:0},dateTimeOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date(it().format("YYYY-MM-DD"));a.setTime(a.getTime()-288e5),t.$emit("pick",[a,e])}},{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},entryDetail:"",detailVisable:!1,materialLoading:!1,accountLoading:!1,showAddDialog:!1,materialEntryDialogTitle:"新增入库单",materials:[],accounts:[],purchase_methods:[{name:"现金",value:"CASH"},{name:"银行",value:"BANK"},{name:"微信",value:"WECHAT"},{name:"支付宝",value:"ALIPAY"}],quality_results:[{name:"通过",value:"true"},{name:"不通过",value:"true"},{name:"部分通过",value:"true"}],materialEntryForm:{material:"",application_count:"",real_count:"",per_price:"",total_price:"",buyer:"",remark:"",sender:"",maker:"",inspector:"",quality_result:"",purchase_method:""},isEntryUpdate:!1,isPrinting:!1}},methods:{searching:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.searchingForm,a=e.keyword,r=e.dateTime,i=e.status;t&&(this.page.currentPage=1),this.getMaterialEntries({status:i,keyword:a,start_time:r[0],end_time:r[1]})},addMaterialEntry:function(){this.showAddDialog=!0},entryClose:function(){this.entryVisable=!1},handleSizeChange:function(){},handleCurrentChange:function(t){this.page.currentPage=t,this.searching(!1)},getMaterialEntries:function(t){var e=this,a=this.page,r=a.pageSize,i=a.currentPage,s={limit:r,offset:r*(i-1),embed:"material"};this.$axios.get("/material_entries",{params:Q()(s,t)}).then(function(t){var a=t.data,r=a.data,i=a.meta,s=e.page,n=s.currentPage,l=s.pageSize;e.materialEntries=r.map(function(t,a){switch(t.hasModifyRight=!1,"CAIGOU"===e.user.role&&"INSPECTION"===t.status&&(t.hasModifyRight=!0),t.status){case"INSPECTION":t.cnstatus="待质检";break;case"STORAGE":t.cnstatus="待入库";break;case"UNREVIEW":t.cnstatus="待审核";break;case"PASSED":t.cnstatus="审核通过";break;case"REJECTED":t.cnstatus="审核失败";break;default:break}return t.index=(n-1)*l+a+1,t.no=t.no.split("-")[0],t.created_at=it.tz(t.created_at,"Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss"),t}),e.page.total=i.count})},queryMaterials:function(t){var e=this;this.materialLoading=!0;var a={limit:1e3,offset:0,embed:"material",keyword:t};this.$axios.get("/materials",{params:Q()(a)}).then(function(t){var a=t.data.data,r=e.page,i=r.currentPage,s=r.pageSize;e.materials=a.map(function(t,e){return t.index=(i-1)*s+e+1,t.no=t.no.split("-")[0],t}),e.materialLoading=!1}).catch(function(){e.$message.error("原材料接口调用失败")})},queryAccounts:function(t){var e=this;this.accountLoading=!0;var a={limit:1e3,offset:0,keyword:t};this.$axios.get("/accounts",{params:Q()(a)}).then(function(t){var a=t.data.data;e.accounts=a,e.accountLoading=!1}).catch(function(){e.$message.error("用户接口调用失败")})},closeEntry:function(){},printer:function(){var t=this;this.isPrinting=!0,window.jQuery(".entry-detail-container").printThis({importCSS:!0,importStyle:!0}),setTimeout(function(){t.isPrinting=!1},1e3)},showDetail:function(t){this.entryDetail=t,this.detailVisable=!0},editEntry:function(t,e){},deleteEntry:function(t,e){var a=this;this.$confirm("此操作将永久删除该入库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/material_entries/".concat(e._id)).then(function(t){a.$message.success({message:"删除入库单成功",duration:1500,onClose:function(){a.getMaterialEntries()}})}).catch(function(){a.$message.error("删除入库单接口调用失败")})})},submitMaterialEntryForm:function(t){var e=this,a="/material_entries",r="post",i=this[t];i.maker||(i.maker=this.user._id),A()(i).forEach(function(t){i[t]||delete i[t]}),this.isEntryUpdate&&(a="/material_outs/".concat(i._id),r="patch",i.materials.forEach(function(t){"object"===Object(rt["a"])(t.material)&&(t.material=t.material._id)}),"object"===Object(rt["a"])(i.maker)&&(i.maker=i.maker._id),"object"===Object(rt["a"])(i.applicant)&&(i.applicant=i.applicant._id),"REJECTED"===i.status&&(i.status="UNREVIEW"),delete i.index,delete i.created_at,delete i.updated_at,delete i.__v,delete i.no,delete i._id,delete i.totalLeft),this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.request({url:a,method:r,data:i}).then(function(t){e.$message.success({message:e.isEntryUpdate?"修改材料入库单成功":"新增材料入库单成功",duration:1500,onClose:function(){}}),e.getMaterialEntries(),e.showAddDialog=!1}).catch(function(t){t.request&&400===t.request.status?e.$message.error("参数错误"):e.$message.error("接口请求失败"),e.showAddDialog=!1})})},closeMaterialEntryForm:function(){this.showAddDialog=!1},cancleEntrySubmit:function(){this.showAddDialog=!1}},created:function(){this.getMaterialEntries(),this.queryMaterials(),this.queryAccounts()}},nt=st,lt=(a("e60a"),Object(h["a"])(nt,et,at,!1,null,null,null));lt.options.__file="MaterialEntry.vue";var ot=lt.exports,ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"material-out"},[a("div",{staticClass:"breadcrumb"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/material"}}},[t._v("原材料管理")]),a("el-breadcrumb-item",[t._v("出库单管理")])],1)],1),a("div",{staticClass:"searching"},[a("el-form",{staticClass:"searching-form",attrs:{inline:!0,model:t.searchingForm}},[a("el-form-item",[a("el-select",{staticClass:"materil-out-status",attrs:{placeholder:"出库单状态"},model:{value:t.searchingForm.status,callback:function(e){t.$set(t.searchingForm,"status",e)},expression:"searchingForm.status"}},[a("el-option",{attrs:{label:"所有",value:""}}),a("el-option",{attrs:{label:"未审核",value:"UNREVIEW"}}),a("el-option",{attrs:{label:"通过",value:"PASSED"}}),a("el-option",{attrs:{label:"未通过",value:"REJECTED"}})],1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.dateTimeOptions},model:{value:t.searchingForm.dateTime,callback:function(e){t.$set(t.searchingForm,"dateTime",e)},expression:"searchingForm.dateTime"}})],1),a("el-form-item",[a("el-input",{staticClass:"keyword",attrs:{placeholder:"出库单关键字"},model:{value:t.searchingForm.keyword,callback:function(e){t.$set(t.searchingForm,"keyword",e)},expression:"searchingForm.keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searching}},[t._v("搜索")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMaterialOut}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"material-outs"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.materialOuts,loading:t.tableLoading}},[a("el-table-column",{attrs:{label:"序号",prop:"index",width:"60px"}}),a("el-table-column",{attrs:{label:"出库单编号",prop:"no",width:"100px"}}),a("el-table-column",{attrs:{label:"申请者",prop:"applicant.name",width:"80px"}}),a("el-table-column",{attrs:{label:"原因",prop:"reason",width:"80px"}}),a("el-table-column",{attrs:{label:"总数量",prop:"total_count",width:"80px"}}),a("el-table-column",{attrs:{label:"制作者",prop:"maker.name",width:"80px"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at"}}),a("el-table-column",{attrs:{label:"详情"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){t.showDetail(e.row)}}},[t._v("查看出库单详情")])]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return["UNREVIEW"===e.row.status&&["CAIWU","ADMIN"].includes(t.user.role)?a("div",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.reviewOut(e.row,"PASSED")}}},[t._v("通过")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.reviewOut(e.row,"REJECTED")}}},[t._v("驳回")])],1):t._e(),"UNREVIEW"===e.row.status?a("span",[t._v("未审核")]):a("span",[t._v(t._s("PASSED"===e.row.status?"已通过":"审核不通过"))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[["UNREVIEW","REJECTED"].includes(e.row.status)?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editOut(e.row)}}},[t._v(t._s("UNREVIEW"===e.row.status?"修改":"重新提交"))]):t._e(),"ADMIN"===t.user.role?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteOut(e.$index,e.row,t.event)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t.materialOuts.length?a("div",{staticClass:"paging"},[a("el-pagination",{staticClass:"paging-item",attrs:{"current-page":t.page.currentPage,"page-size":t.page.pageSize,background:"",big:"",layout:"total, prev, pager, next, jumper",total:t.page.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.page,"currentPage",e)}}})],1):t._e(),a("div",{staticClass:"material-out-detail"},[a("el-dialog",{attrs:{title:"出库单",visible:t.outVisiable},on:{"update:visible":function(e){t.outVisiable=e},close:t.outClose}},[a("el-row",{staticClass:"material-out-printer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.printer}},[t._v("打印")])],1),a("div",{staticClass:"material-out-container"},[a("div",{staticClass:"material-out-remark"},[a("h2",{staticClass:"material-out-remark-title"},[t._v("出库单")]),a("p",{staticClass:"material-out-remark-subtitle"},[t._v("一式三联，1库房2财务3领料人")])]),a("div",{staticClass:"material-out-caption"},[a("div",{staticClass:"material-out-caption"},[a("p",{staticClass:"material-out-caption-department"},[t._v("领料部门："+t._s(t.currentOut.applicant.department?t.currentOut.applicant.department.name:""))]),a("p",{staticClass:"material-out-caption-application"},[t._v("领料人："+t._s(t.currentOut.applicant.name))]),a("p",{staticClass:"material-out-caption-date"},[t._v("出库单日期："+t._s(t.currentOut.created_at))]),a("p",{staticClass:"material-out-caption-no"},[t._v("出库单编号："+t._s(t.currentOut.no))])])]),a("table",{staticClass:"material-out-table",attrs:{border:"1"}},[a("tr",[a("th",{staticClass:"material-out-item-smaller"},[t._v("序号")]),a("th",{staticClass:"material-out-item-middle"},[t._v("材料编码")]),a("th",{staticClass:"material-out-item-middle"},[t._v("材料名称")]),a("th",{staticClass:"material-out-item-middle"},[t._v("规格型号")]),a("th",{staticClass:"material-out-item-smaller"},[t._v("单位")]),a("th",{staticClass:"material-out-item-middle"},[t._v("厂家")]),a("th",{staticClass:"material-out-item-smaller"},[t._v("库存数")]),a("th",{staticClass:"material-out-item-smaller"},[t._v("出库数")]),a("th",{staticClass:"material-out-item-middle"},[t._v("用途")]),a("th",{staticClass:"material-out-item-middle"},[t._v("备注")])]),t._l(t.currentOut.materials,function(e){return a("tr",{key:e.index},[a("td",[t._v(t._s(e.index))]),a("td",[t._v(t._s(e.material.no))]),a("td",[t._v(t._s(e.material.name))]),a("td",[t._v(t._s(e.material.model))]),a("td",[t._v(t._s(e.material.unit))]),a("td",[t._v(t._s(e.material.supplier.name))]),a("td",[t._v(t._s(e.left_count||e.material.left_num))]),a("td",[t._v(t._s(e.count))]),a("td",[t._v(t._s(e.order||"无"))]),a("td",[t._v(t._s(e.remark||"无"))])])}),a("tr",[a("td",{attrs:{colspan:"6"}},[t._v("合计：")]),a("td",[t._v(t._s(t.currentOut.totalLeft))]),a("td",[t._v(t._s(t.currentOut.total_count))]),a("td",{attrs:{colspan:"2"}})])],2),a("div",{staticClass:"material-out-sign"},[a("p",[t._v("制作人："+t._s(t.currentOut.maker.name))]),a("p",[t._v("库管："+t._s(t.currentOut.reviewer?t.currentOut.reviewer.name:"无"))]),a("p",[t._v("财务："+t._s(t.currentOut.financor?t.currentOut.financor.name:"无"))])])])],1)],1),a("div",{staticClass:"material-out-add"},[a("el-dialog",{attrs:{title:t.materialOutDialogTitle,visible:t.showAddDialog,width:"30%","before-close":t.closeMaterialOutForm},on:{"update:visible":function(e){t.showAddDialog=e}}},[a("el-form",{ref:"materialOutForm",staticClass:"material-dialog",attrs:{model:t.materialOutForm,"label-width":"100px","label-position":"right"}},[a("el-form-item",{attrs:{label:"申请人",rules:{required:!0,message:"领料人不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"out-applicant",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入领料人关键词","remote-method":t.queryAccounts,loading:t.accountLoading},model:{value:t.materialOutForm.applicant,callback:function(e){t.$set(t.materialOutForm,"applicant",e)},expression:"materialOutForm.applicant"}},t._l(t.accounts,function(t,e){return a("el-option",{key:e,attrs:{label:t.department.name+":"+t.name,value:t._id}})}),1)],1),a("el-form-item",{attrs:{label:"原因",rules:{required:!0,message:"材料用途不能为空",trigger:"blur"}}},[a("el-input",{staticClass:"out-reason",attrs:{placeholder:"请输入材料用途"},model:{value:t.materialOutForm.reason,callback:function(e){t.$set(t.materialOutForm,"reason",e)},expression:"materialOutForm.reason"}})],1),t._l(t.materialOutForm.materials,function(e,r){return a("el-form-item",{key:r,staticClass:"out-material-container",attrs:{label:"材料"+(r+1),rules:{required:!0,message:"材料信息不能为空",trigger:"blur"}}},[a("el-select",{staticClass:"out-material out-form-item",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入材料关键词","remote-method":t.queryMaterials,loading:t.loading},model:{value:e.material,callback:function(a){t.$set(e,"material",a)},expression:"item.material"}},t._l(t.materials,function(t,e){return a("el-option",{key:e,attrs:{label:t.no+":"+t.name,value:t._id}})}),1),a("el-input",{staticClass:"out-count out-form-item",attrs:{placeholder:"申请数量"},on:{blur:function(a){t.changeTotalCount(e)}},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}}),a("el-input",{staticClass:"out-order out-form-item",attrs:{placeholder:"用于订单"},model:{value:e.order,callback:function(a){t.$set(e,"order",a)},expression:"item.order"}}),a("el-input",{staticClass:"out-remark out-form-item",attrs:{placeholder:"备注"},model:{value:e.remark,callback:function(a){t.$set(e,"remark",a)},expression:"item.remark"}}),a("el-button",{on:{click:function(a){a.preventDefault(),t.removeMaterial(e)}}},[t._v("删除")])],1)}),a("el-form-item",{attrs:{label:"总数",prop:"reason"}},[a("el-input",{staticClass:"out-total-count",attrs:{disabled:""},model:{value:t.materialOutForm.total_count,callback:function(e){t.$set(t.materialOutForm,"total_count",e)},expression:"materialOutForm.total_count"}})],1),a("el-form-item",{staticClass:"out-btn-container"},[a("el-button",{on:{click:t.addMaterial}},[t._v("新增材料")]),a("el-button",{on:{click:t.cancleOutSubmit}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitMaterialOutForm("materialOutForm")}}},[t._v("保存")])],1)],2)],1)],1)])},ut=[],mt=a("e814"),dt=a.n(mt),pt=a("e8e8"),ft=a("6d46"),ht={name:"MaterialOut",data:function(){return{searchingForm:{dateTime:"",keyword:"",status:""},materialOuts:[],page:{currentPage:1,pageSize:10,total:0},dateTimeOptions:{shortcuts:[{text:"今天",onClick:function(t){var e=new Date,a=new Date(pt().format("YYYY-MM-DD"));a.setTime(a.getTime()-288e5),t.$emit("pick",[a,e])}},{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}}]},currentOut:{materials:[{index:1,material:{no:"",name:"",count:0,left_count:0,unit:"",model:"",supplier:{name:""}},order:"",remark:""}],total:0,applicant:{department:"",name:""},no:"",total_count:0,left_total_count:0,cerated_at:"",maker:{name:""},reviewer:{name:""}},outVisiable:!1,showAddDialog:!1,materialOutForm:{reason:"",total_count:0,applicant:"",materials:[{material:"",count:"",remark:"",order:""}]},materials:[],accounts:[],loading:!1,tableLoading:!1,accountLoading:!1,materialOutDialogTitle:"",isOutUpdate:!1}},computed:Object(u["a"])({},Object(y["b"])({user:"user/user"})),methods:{searching:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.searchingForm,a=e.keyword,r=e.dateTime,i=e.status;t&&(this.page.currentPage=1),this.getMaterialOuts({status:i,keyword:a,start_time:r[0],end_time:r[1]})},showDetail:function(t){var e=0;t.materials.forEach(function(t,a){t.index=a+1;var r=t.left_count||t.material.left_num;e+=r}),t.totalLeft=e,this.outVisiable=!0,this.currentOut=t},outClose:function(){this.outVisiable=!1},handleSizeChange:function(){},handleCurrentChange:function(t){this.page.currentPage=t,this.searching(!1)},getMaterialOuts:function(t){var e=this;this.tableLoading=!0;var a=this.page,r=a.pageSize,i=a.currentPage,s={limit:r,offset:r*(i-1),embed:"material,department"};this.$axios.get("/material_outs",{params:Q()(s,t)}).then(function(t){var a=t.data,r=a.data,i=a.meta,s=e.page,n=s.currentPage,l=s.pageSize;e.materialOuts=r.map(function(t,e){return t.index=(n-1)*l+e+1,t.no=t.no.split("-")[0],t.created_at=pt.tz(t.created_at,"Asia/Shanghai").format("YYYY-MM-DD HH:mm:ss"),t}),e.page.total=i.count,e.tableLoading=!1}).catch(function(){e.$message.error("出库单列表获取失败"),e.tableLoading=!1})},printer:function(){window.jQuery(".material-out-container").printThis({debug:!1,importCSS:!0,importStyle:!0})},addMaterialOut:function(){this.materialOutDialogTitle="新增材料出库单",this.showAddDialog=!0,this.isOutUpdate=!1},closeMaterialOutForm:function(){this.showAddDialog=!1},submitMaterialOutForm:function(t){var e=this,a="/material_outs",r="post",i=this[t];i.maker||(i.maker=this.user._id),this.isOutUpdate&&(a="/material_outs/".concat(i._id),r="patch",i.materials.forEach(function(t){"object"===Object(rt["a"])(t.material)&&(t.material=t.material._id)}),"object"===Object(rt["a"])(i.maker)&&(i.maker=i.maker._id),"object"===Object(rt["a"])(i.applicant)&&(i.applicant=i.applicant._id),"REJECTED"===i.status&&(i.status="UNREVIEW"),delete i.index,delete i.created_at,delete i.updated_at,delete i.__v,delete i.no,delete i._id,delete i.totalLeft),this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.request({url:a,method:r,data:i}).then(function(t){e.$message.success({message:e.isOutUpdate?"修改材料出库单成功":"新增材料出库单成功",duration:1500,onClose:function(){}}),e.getMaterialOuts(),e.showAddDialog=!1}).catch(function(t){t.request&&400===t.request.status?e.$message.error("参数错误"):e.$message.error("接口请求失败"),e.showAddDialog=!1})})},cancleOutSubmit:function(){this.showAddDialog=!1},queryMaterials:function(t){var e=this;this.loading=!0;var a={limit:1e3,offset:0,embed:"material",keyword:t};this.$axios.get("/materials",{params:Q()(a)}).then(function(t){var a=t.data.data,r=e.page,i=r.currentPage,s=r.pageSize;e.materials=a.map(function(t,e){return t.index=(i-1)*s+e+1,t.no=t.no.split("-")[0],t}),e.loading=!1}).catch(function(){e.$message.error("原材料接口调用失败")})},queryAccounts:function(t){var e=this;this.accountLoading=!0;var a={limit:1e3,offset:0,keyword:t};this.$axios.get("/accounts",{params:Q()(a)}).then(function(t){var a=t.data.data;e.accounts=a,e.accountLoading=!1}).catch(function(){e.$message.error("用户接口调用失败")})},addMaterial:function(){this.materialOutForm.materials.push({material:"",count:"",remark:"",order:""})},removeMaterial:function(t){var e=this.materialOutForm.materials.indexOf(t);-1!==e&&this.materialOutForm.materials.splice(e,1)},changeTotalCount:function(t){var e=this;t&&t.count&&ft.isNumber(dt()(t.count))&&(this.materialOutForm.total_count=0,this.materialOutForm.materials.forEach(function(t){e.materialOutForm.total_count+=dt()(t.count)}))},deleteOut:function(t,e,a){var r=this;this.$confirm("此操作将永久删除该出库单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$axios.delete("/material_outs/".concat(e._id)).then(function(t){r.$message.success({message:"删除出库单成功",duration:1500,onClose:function(){r.showDialog=!1,r.getMaterialOuts()}})}).catch(function(){r.$message.error("删除出库单接口调用失败")})})},editOut:function(t,e){this.showAddDialog=!0,this.materialOutDialogTitle="修改材料出库单",this.isOutUpdate=!0,this.materialOutForm=ft.clone(t)},reviewOut:function(t,e){var a=this;e&&(this.materialOutForm.status=e),this.$axios.request({url:"/material_outs/".concat(t._id),method:"patch",data:{status:e}}).then(function(t){a.$message.success({message:"修改审核状态成功",duration:1500,onClose:function(){}})}).catch(function(t){t.request&&400===t.request.status?a.$message.error("参数错误"):a.$message.error("接口请求失败")})}},created:function(){this.getMaterialOuts(),this.queryAccounts(),this.queryMaterials()}},gt=ht,bt=(a("3d8e"),Object(h["a"])(gt,ct,ut,!1,null,null,null));bt.options.__file="MaterialOut.vue";var vt=bt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{staticClass:"dashboard-item",attrs:{span:24}},[a("h1",[t._v("原材料统计")])]),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("el-row",[a("el-col",{staticClass:"card-title",attrs:{span:24}},[a("h2",{staticClass:"card-title"},[t._v("原材料数量")])]),a("el-col",{attrs:{span:12}},[a("span",[t._v("入库数：")]),a("span",[a("router-link",{attrs:{to:{name:"materialEntry",params:{start_time:this.startTime,end_time:this.endTime}}}},[t._v(t._s(t.material.entryNumber))])],1)]),a("el-col",{attrs:{span:12}},[a("span",[t._v("出库数：")]),a("span",[a("router-link",{attrs:{to:{name:"materialOut",params:{start_time:this.startTime,end_time:this.endTime}}}},[t._v(t._s(t.material.outNumber))])],1)])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("el-row",[a("el-col",{staticClass:"card-title",attrs:{span:24}},[a("h2",{staticClass:"card-title"},[t._v("入库单")])]),a("el-col",{attrs:{span:12}},[a("span",[t._v("总数量："+t._s(t.materialEntries.allCount))])]),a("el-col",{attrs:{span:12}},[a("span",[t._v("昨日新增：")]),a("span",[a("router-link",{attrs:{to:{name:"materialEntry",params:{start_time:this.startTime,end_time:this.endTime}}}},[t._v(t._s(t.materialEntries.count))])],1)])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{shadow:"hover"}},[a("el-row",[a("el-col",{staticClass:"card-title",attrs:{span:24}},[a("h2",{staticClass:"card-title"},[t._v("出库单")])]),a("el-col",{attrs:{span:12}},[a("span",[t._v("总数量："+t._s(t.materialOuts.allCount))])]),a("el-col",{attrs:{span:12}},[a("span",[t._v("昨日新增：")]),a("span",[a("router-link",{attrs:{to:{name:"materialOut",params:{start_time:this.startTime,end_time:this.endTime}}}},[t._v(t._s(t.materialOuts.count))])],1)])],1)],1)],1)],1)],1)},yt=[],kt=a("e8e8"),wt={name:"Dashboard",props:{msg:String},data:function(){return{material:{entryNumber:0,outNumber:0},startTime:new Date(kt().startOf("day")-864e6),endTime:new Date(kt().startOf("day")),materialEntries:{allCount:0,count:0},materialOuts:{allCount:0,count:0}}},methods:{getMaterialEntrys:function(){var t=this;this.$axios.get("/material_entries",{params:{limit:1e5,offset:0,embed:"material",start_time:this.startTime,end_time:this.endTime,queryAll:!0}}).then(function(e){var a=e.data,r=a.data,i=a.meta;r.forEach(function(e){t.material.entryNumber+=dt()(e.real_count)}),t.materialEntries=i})},getMaterialOuts:function(){var t=this;this.$axios.get("/material_outs",{params:{limit:1e5,offset:0,embed:"material",start_time:this.startTime,end_time:this.endTime,queryAll:!0}}).then(function(e){var a=e.data,r=a.data,i=a.meta;r.forEach(function(e){e.materials.forEach(function(e){t.material.outNumber+=dt()(e.count)})}),t.materialOuts=i})}},created:function(){this.getMaterialOuts(),this.getMaterialEntrys()}},Ct=wt,jt=(a("0b3f"),Object(h["a"])(Ct,_t,yt,!1,null,"1c643fab",null));jt.options.__file="Dashboard.vue";var xt=jt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"login"},[a("el-col",{attrs:{span:8,offset:8}},[a("h2",[t._v("重庆伊尔流体ERP系统登录")]),a("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:t.loginForm,"status-icon":"",rules:t.loginRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"账号：",prop:"username"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入用户名或手机号"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{label:"密码：",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.login("loginForm")}}},[t._v("登录")]),a("el-button",{on:{click:function(e){t.resetLogin("loginForm")}}},[t._v("重置")])],1)],1)],1)],1)},Ft=[],$t=a("f499"),Ot=a.n($t),Dt={name:"Login",data:function(){var t=function(t,e,a){""===e?a(new Error("请输入用户名或手机号")):a()},e=function(t,e,a){""===e?a(new Error("请输入密码")):a()};return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:e,trigger:"blur"}]}}},methods:{login:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$axios.post("/auth/login",e.loginForm).then(function(t){var a=Q()(t.data.data,t.data.meta);e.$store.dispatch("user/updateUser",a),window.localStorage.setItem("user",Ot()(a)),e.$router.push("/")}).catch(function(t){t.request&&400===t.request.status?e.$message.error("账户或密码错误"):e.$message.error("接口请求失败")})})},resetLogin:function(t){this.$refs[t].resetFields()}}},Tt=Dt,Mt=(a("e310"),Object(h["a"])(Tt,Et,Ft,!1,null,"494ffcb6",null));Mt.options.__file="Login.vue";var St=Mt.exports;s["default"].use(z["a"]);var At=function(){var t=window.localStorage.getItem("user");return!!t||0!==A()(J.state.user.user).length},zt=new z["a"]({mode:"history",base:"/",routes:[{path:"/",name:"dashboard",component:xt},{path:"/material",name:"material",component:tt},{path:"/material/entry",name:"materialEntry",component:ot},{path:"/material/out",name:"materialOut",component:vt},{path:"/login",name:"login",component:St}]});zt.beforeEach(function(t,e,a){["/login"].includes(t.path)?(J.dispatch("navigator/updateNavigator","/login"),a()):At()?(J.dispatch("navigator/updateNavigator",t.path),a()):a("/login")});var qt=zt,Pt=a("4587"),It=a.n(Pt),Lt=(a("cd2e"),a("c69f"),a("7f43")),Nt=a.n(Lt);s["default"].prototype.$moment=a("e8e8"),s["default"].config.productionTip=!1,s["default"].use(It.a);var Ut=Nt.a.create({baseURL:"http://127.0.0.1:7001/api",timeout:3e3,validateStatus:function(t){return t>=200&&t<300}});Ut.interceptors.request.use(function(t){var e=J.state.user.user||JSON.parse(window.localStorage.getItem("user"));return e&&(t.headers.common["access-token"]=e.token||""),t}),Ut.interceptors.response.use(function(t){return t},function(t){var e=t.response;if(403===e.status){if(4030001!==e.data.code)return i.a.reject(t);window.localStorage.removeItem("user"),J.dispatch("user/updateUser",{}),J.dispatch("navigator/updateNavigator","/login"),qt.push("/login")}}),s["default"].prototype.$axios=Ut,new s["default"]({router:qt,store:J,render:function(t){return t(M)}}).$mount("#app")},"576d":function(t,e,a){},"5c0b":function(t,e,a){"use strict";var r=a("5e27"),i=a.n(r);i.a},"5e27":function(t,e,a){},"688a":function(t,e,a){"use strict";var r=a("f00e"),i=a.n(r);i.a},"71f2":function(t,e,a){},"78d6":function(t,e,a){"use strict";var r=a("9311"),i=a.n(r);i.a},9311:function(t,e,a){},aec8:function(t,e,a){},c69f:function(t,e,a){},cb11:function(t,e,a){"use strict";var r=a("71f2"),i=a.n(r);i.a},d0a8:function(t,e,a){"use strict";var r=a("aec8"),i=a.n(r);i.a},e310:function(t,e,a){"use strict";var r=a("f106"),i=a.n(r);i.a},e60a:function(t,e,a){"use strict";var r=a("259c"),i=a.n(r);i.a},f00e:function(t,e,a){},f106:function(t,e,a){}});
//# sourceMappingURL=app.8578c612.js.map